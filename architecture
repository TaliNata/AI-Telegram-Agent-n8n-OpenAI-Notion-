# –û–±—â–∏–π –æ–±–∑–æ—Ä

–ê–≥–µ–Ω—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞:
Interactive mode ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É –≤ Telegram
Scheduled mode ‚Äî –∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (Cron)
–û–±–µ –≤–µ—Ç–∫–∏ —Å—Ö–æ–¥—è—Ç—Å—è –≤ –µ–¥–∏–Ω—ã–π LLM-pipeline, –∫–æ—Ç–æ—Ä—ã–π:
–ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
–§–æ—Ä–º–∏—Ä—É–µ—Ç prompt
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram
–õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Notion

## –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (Triggers)

Telegram Trigger
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
–∫–æ–º–∞–Ω–¥ (/start, /digest, –∏ —Ç.–¥.)
—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
–ü–µ—Ä–µ–¥–∞—ë—Ç message, chat_id, user_id, text

## Schedule Trigger (Cron)

–ó–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç)

–ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π –∫–æ–º–∞–Ω–¥—É

3. Pre-processing —Å–ª–æ–π (–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è)
üß© IF /start

–ü—Ä–æ–≤–µ—Ä–∫–∞: —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π /start

–ï—Å–ª–∏ –¥–∞ ‚Üí onboarding-—Ü–µ–ø–æ—á–∫–∞

üß© Welcome Message ‚Üí Send Welcome

–û—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è

–ù–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π LLM-pipeline

–£–ª—É—á—à–∞–µ—Ç UX –∏ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –º–æ–¥–µ–ª—å

üß© Extract Telegram Data

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

–æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞

–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ chat/user metadata

–ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∫ –µ–¥–∏–Ω–æ–º—É ctx

üß© Prepare Cron Context

–°–æ–∑–¥–∞—ë—Ç –ø—Å–µ–≤–¥–æ-—Å–æ–æ–±—â–µ–Ω–∏–µ:

command

source = cron

–≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ pipeline, —á—Ç–æ –∏ –¥–ª—è Telegram

4. Command & Context Layer
üß† Validate Command

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

—Ç–∏–ø —Å—Ü–µ–Ω–∞—Ä–∏—è (—á–∞—Ç / –¥–∞–π–¥–∂–µ—Å—Ç / –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)

–¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã

–ó–∞—â–∏—â–∞–µ—Ç LLM –æ—Ç –º—É—Å–æ—Ä–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞

5. Data Layer (Notion)
üóÑ Fetch Notion Records

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Notion:

–Ω–æ–≤–æ—Å—Ç–∏

–∑–∞–ø–∏—Å–∏

–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–ú–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å batch (–¥–æ 50 items)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫:

–∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∞–∫—Ç–æ–≤

memory-storage

–±–∞–∑–∞ –¥–ª—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

6. Prompt Engineering Layer
‚úçÔ∏è Build Prompt

–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —É–∑–µ–ª

–°–æ–±–∏—Ä–∞–µ—Ç:

–∫–æ–º–∞–Ω–¥—É / –∑–∞–¥–∞—á—É

–¥–∞–Ω–Ω—ã–µ –∏–∑ Notion

—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–§–æ—Ä–º–∏—Ä—É–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π prompt, –∞ –Ω–µ ‚Äú—Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç‚Äù

7. LLM Layer
ü§ñ OpenAI Chat Model

–ü–æ–¥–∫–ª—é—á—ë–Ω –∫–∞–∫ –º–æ–¥–µ–ª—å

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:

üîó Basic LLM Chain

–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

–ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å

–∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞

–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã –º–æ–¥–µ–ª–∏ –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

8. Post-processing & Output
üßæ Prepare Telegram Message

–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞:

Markdown / plain text

–ª–∏–º–∏—Ç—ã Telegram

–û—á–∏—Å—Ç–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ LLM-–æ—Ç–≤–µ—Ç–∞

üì§ Send Telegram Message

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–ï–¥–∏–Ω—ã–π –≤—ã—Ö–æ–¥ –∫–∞–∫ –¥–ª—è Cron, —Ç–∞–∫ –∏ –¥–ª—è —á–∞—Ç–∞

9. Observability & Logging
üóÇ Log to Notion

–ó–∞–ø–∏—Å—å:

–≤—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ LLM

timestamp

source (telegram / cron)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

–∞—É–¥–∏—Ç–∞

–∞–Ω–∞–ª–∏—Ç–∏–∫–∏

—É–ª—É—á—à–µ–Ω–∏—è prompt-–æ–≤

10. Error Handling (–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—É—Ä)
üö® Error Trigger

–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫ workflow

üß© Format Error Data

–ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∫ —á–∏—Ç–∞–µ–º–æ–º—É –≤–∏–¥—É:

workflow

node

stack

timestamp

üì¢ Send Error Alert (Telegram)

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ n8n UI

11. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

‚úÖ Single pipeline –¥–ª—è Telegram –∏ Cron

‚úÖ Separation of concerns (—Ç—Ä–∏–≥–≥–µ—Ä—ã / –ª–æ–≥–∏–∫–∞ / LLM / –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

‚úÖ LLM-agnostic (–º–æ–¥–µ–ª—å –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å)

‚úÖ Observability by default

‚úÖ Production-ready error handling
